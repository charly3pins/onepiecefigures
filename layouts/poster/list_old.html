<!DOCTYPE html>
<html lang="{{ .Lang }}">
  {{ partial "head.html" . }}
  <body>
    {{ partial "nav.html" . }}
      
    <header class="header-section ">
      <div class="intro-header no-img">
        <div class="container">
          <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <div class="page-heading">
                <h1>{{ .Title }}</h1>
                <hr class="small">
              </div>

              <div class="well">
                {{ .Content }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>
  
    <div class="container" role="main">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          <div class="cards">
            {{ range $i, $item := $.Site.Data.items.items }}
              <div class="card [ is-collapsed ] ">
                <div class="card__inner [ js-expander ] {{.class}}-hover" id="fig-{{$i}}" onclick="window.location.hash='figf-{{$i}}';">
                    <img src="{{.thumb}}" alt="{{.alt}}"/>
                </div>
                <div class="card__expander" id="figf-{{$i}}">
                  <i class="fa fa-close [ js-collapser ]" onclick="window.location.hash='fig-{{$i}}';"></i>
                  <div class="card__expander-inner">
                    <div class="card__expander-fullimg">
                      <img src="{{.image}}" alt={{.alt}}>
                    </div>
                    <div class="card__expander-details">
                      <h3>{{.name}}</h3>
                      <p><b>Character:</b> {{.character}}</p>
                      <p><b>Category:</b> {{.category}} {{.subcategory}}</p>
                      <p><b>Sculptor:</b> {{.sculptor}}</p>
                      <p><b>Official Price:</b> {{.officialprice}}</p>
                      <p><b>Release Date:</b> {{.releasedate}}</p>
                      <a href="{{.url}}" target="_blank">{{ $.Site.Params.posterbuttontext }}</a>
                    </div>
                  </div>
                </div>
              </div>         
            {{ end }}
          </div>
        </div>
      </div>
    </div>

    {{ partial "footer.html" . }}

    <script>
      var $cell = $('.card');

      //open and close card when clicked on card
      $cell.find('.js-expander').click(function() {

        var $thisCell = $(this).closest('.card');

        if ($thisCell.hasClass('is-collapsed')) {
          $cell.not($thisCell).removeClass('is-expanded').addClass('is-collapsed').addClass('is-inactive');
          $thisCell.removeClass('is-collapsed').addClass('is-expanded');
          
          if ($cell.not($thisCell).hasClass('is-inactive')) {
            //do nothing
          } else {
            $cell.not($thisCell).addClass('is-inactive');
          }

        } else {
          $thisCell.removeClass('is-expanded').addClass('is-collapsed');
          $cell.not($thisCell).removeClass('is-inactive');
        }
      });

      //close card when click on cross
      $cell.find('.js-collapser').click(function() {

        var $thisCell = $(this).closest('.card');

        $thisCell.removeClass('is-expanded').addClass('is-collapsed');
        $cell.not($thisCell).removeClass('is-inactive');
      });
    </script>
  </body>
</html>